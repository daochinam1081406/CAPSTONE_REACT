{"ast":null,"code":"import axios from \"axios\";\nconst baseAPI = axios.create({\n  baseURL: \"https://movienew.cybersoft.edu.vn/api\",\n  headers: {\n    TokenCybersoft: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0ZW5Mb3AiOiJCb290Y2FtcCA1NSIsIkhldEhhblN0cmluZyI6IjI0LzA1LzIwMjQiLCJIZXRIYW5UaW1lIjoiMTcxNjUwODgwMDAwMCIsIm5iZiI6MTY4Nzg4NTIwMCwiZXhwIjoxNzE2NjU2NDAwfQ.HsoestvkIN5Kub3jnAr8UddrPugJcxCsAm4QfMi4ZbU\"\n  }\n});\nbaseAPI.interceptors.request.use(request => {\n  // Làm cái gì đó trước khi request được gửi đi\n  const currentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\n  if (currentUser) {\n    request.headers.Authorization = `Bearer ${currentUser.accessToken}`;\n  }\n  return request;\n}, error => {\n  // Làm cái gì đó khi request bị lỗi\n  return Promise.reject(error);\n});\nbaseAPI.interceptors.response.use(response => {\n  // Chạy vào đây nếu trả về response status trong khoảng 200-299\n  // Làm gì đó với kết quả trả về\n  return response;\n}, error => {\n  // Chạy vào đây nếu trả về response status KHÔNG trong khoảng 200-299\n  // Làm gì đó với lỗi trả về\n\n  // Kiểm tra nếu mã lỗi là 401 => token hết hạn => đăng xuất\n  if (error.response.status === 401) {\n    localStorage.removeItem(\"currentUser\");\n    window.location.replace(\"/sign-in\");\n  }\n  return Promise.reject(error);\n});\nexport default baseAPI;","map":{"version":3,"names":["axios","baseAPI","create","baseURL","headers","TokenCybersoft","interceptors","request","use","currentUser","JSON","parse","localStorage","getItem","Authorization","accessToken","error","Promise","reject","response","status","removeItem","window","location","replace"],"sources":["/Users/daochinam/Cybersoft/FrontEnd/CAPSTONE_REACT/CAPSTONE_REACT/src/apis/baseAPI.js"],"sourcesContent":["import axios from \"axios\";\n\nconst baseAPI = axios.create({\n  baseURL: \"https://movienew.cybersoft.edu.vn/api\",\n  headers: {\n    TokenCybersoft:\n      \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0ZW5Mb3AiOiJCb290Y2FtcCA1NSIsIkhldEhhblN0cmluZyI6IjI0LzA1LzIwMjQiLCJIZXRIYW5UaW1lIjoiMTcxNjUwODgwMDAwMCIsIm5iZiI6MTY4Nzg4NTIwMCwiZXhwIjoxNzE2NjU2NDAwfQ.HsoestvkIN5Kub3jnAr8UddrPugJcxCsAm4QfMi4ZbU\",\n  },\n});\n\nbaseAPI.interceptors.request.use(\n  (request) => {\n    // Làm cái gì đó trước khi request được gửi đi\n    const currentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\n    if (currentUser) {\n      request.headers.Authorization = `Bearer ${currentUser.accessToken}`;\n    }\n    return request;\n  },\n  (error) => {\n    // Làm cái gì đó khi request bị lỗi\n    return Promise.reject(error);\n  }\n);\n\nbaseAPI.interceptors.response.use(\n  (response) => {\n    // Chạy vào đây nếu trả về response status trong khoảng 200-299\n    // Làm gì đó với kết quả trả về\n    return response;\n  },\n  (error) => {\n    // Chạy vào đây nếu trả về response status KHÔNG trong khoảng 200-299\n    // Làm gì đó với lỗi trả về\n\n    // Kiểm tra nếu mã lỗi là 401 => token hết hạn => đăng xuất\n    if (error.response.status === 401) {\n      localStorage.removeItem(\"currentUser\");\n      window.location.replace(\"/sign-in\");\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default baseAPI;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAGD,KAAK,CAACE,MAAM,CAAC;EAC3BC,OAAO,EAAE,uCAAuC;EAChDC,OAAO,EAAE;IACPC,cAAc,EACZ;EACJ;AACF,CAAC,CAAC;AAEFJ,OAAO,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAC7BD,OAAO,IAAK;EACX;EACA,MAAME,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAAC;EACnE,IAAIJ,WAAW,EAAE;IACfF,OAAO,CAACH,OAAO,CAACU,aAAa,GAAI,UAASL,WAAW,CAACM,WAAY,EAAC;EACrE;EACA,OAAOR,OAAO;AAChB,CAAC,EACAS,KAAK,IAAK;EACT;EACA,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAEDf,OAAO,CAACK,YAAY,CAACa,QAAQ,CAACX,GAAG,CAC9BW,QAAQ,IAAK;EACZ;EACA;EACA,OAAOA,QAAQ;AACjB,CAAC,EACAH,KAAK,IAAK;EACT;EACA;;EAEA;EACA,IAAIA,KAAK,CAACG,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;IACjCR,YAAY,CAACS,UAAU,CAAC,aAAa,CAAC;IACtCC,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,UAAU,CAAC;EACrC;EACA,OAAOP,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAef,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}